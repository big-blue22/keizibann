# サーバーデータ復元手順

## 🎯 現状の問題

- **ローカル**: 2024年のダミーデータ4件が含まれていた → **✅ 修正完了**
- **サーバー**: Vercel KVの実際の投稿データが取得できていない → **⚠️ 要対応**

## 📊 正しいデータ

### 実際にサーバーに投稿されたデータ（2件）

1. **Gensparkの進化可能性** (2025/6/26)
   - ID: `post_1750932805991`
   - URL: https://x.com/genspark_japan/status/1938175412863164522
   - 閲覧数: 累計8回 ／ 直近3日間4回

2. **AI開発速度の衝撃的な進化** (2025/6/26)
   - ID: `post_1750929070515`
   - URL: https://x.com/yugen_matuni/status/1937955160262905938
   - 閲覧数: 累計15回 ／ 直近3日間6回

## 🔧 復元手順

### ✅ ローカル環境（完了済み）
```bash
node update-local-data.mjs
```
- ダミーデータを削除
- 実際のサーバーデータのみに更新
- `/data/posts.json` と `/public/data/posts.json` を同期

### ⚠️ 本番環境（要実行）

#### 1. Vercelにデプロイ
```bash
vercel --prod
```

#### 2. 環境変数の確認
Vercelダッシュボードで以下が設定されていることを確認:
- `KV_REST_API_URL`
- `KV_REST_API_TOKEN`
- `GEMINI_API_KEY`
- `JWT_SECRET`

#### 3. サーバーデータ復元
本番環境で以下のスクリプトを実行:
```bash
# 本番環境のサーバーで実行
node restore-server-data.mjs
```

#### 4. 動作確認
- 投稿一覧が正しく表示されるか確認
- 累計・直近3日間の閲覧数が表示されるか確認
- 新規投稿・削除機能が正常に動作するか確認

## 📝 ファイル一覧

### 復元用スクリプト
- `restore-server-data.mjs` - サーバー（Vercel KV）データ復元
- `update-local-data.mjs` - ローカルデータ更新
- `check-kv-data.mjs` - KVデータ確認

### データファイル
- `/data/posts.json` - メインデータ（開発用）
- `/public/data/posts.json` - 公開データ（本番フォールバック用）

## 🎯 期待される結果

### 本番環境
- Vercel KVに実際のサーバーデータ（2件）が復元される
- ダミーデータ（2024年作成の4件）は除外される
- 累計・直近3日間閲覧数が正しく表示される

### 表示内容
```
1. Gensparkの進化可能性 (2025/6/26)
   閲覧数: 累計 8 回 ／ 直近3日間 4 回

2. AI開発速度の衝撃的な進化 (2025/6/26)
   閲覧数: 累計 15 回 ／ 直近3日間 6 回
```

---
**作成日**: 2025年7月3日  
**ステータス**: ローカル復元完了 / サーバー復元待ち
